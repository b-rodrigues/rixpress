<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Core rixpress Functions and Usage • rixpress</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Core rixpress Functions and Usage">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rixpress</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a-intro-concepts.html">Introductory concepts</a></li>
    <li><a class="dropdown-item" href="../articles/b-core-functions.html">Core rixpress Functions and Usage</a></li>
    <li><a class="dropdown-item" href="../articles/c-tutorial.html">Setting up a pipeline from scratch: a tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/d-polyglot.html">Polyglot pipelines and literate programming with Quarto or R Markdown</a></li>
    <li><a class="dropdown-item" href="../articles/e-ci.html">Running pipelines in CI</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/b-rodrigues/rixpress/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Core rixpress Functions and Usage</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/b-rodrigues/rixpress/blob/main/vignettes/b-core-functions.Rmd" class="external-link"><code>vignettes/b-core-functions.Rmd</code></a></small>
      <div class="d-none name"><code>b-core-functions.Rmd</code></div>
    </div>

    
    
<p>This vignette introduces the core functions required to build a
<a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> pipeline, but doesn’t cover everything you need
to know just yet. It also assumes that you’ve read
<code><a href="../articles/a-intro-concepts.html">vignette("a-intro-concepts")</a></code>. In the next vignette
<code><a href="../articles/c-tutorial.html">vignette("c-tutorial")</a></code>, you’ll learn how to set up a
complete pipeline from start to finish.</p>
<div class="section level2">
<h2 id="getting-data-into-the-pipeline">Getting data into the pipeline<a class="anchor" aria-label="anchor" href="#getting-data-into-the-pipeline"></a>
</h2>
<p><a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> provides several functions to help you write
derivations. These functions typically start with the prefix
<code>rxp_</code> and follow a similar structure. The first step in any
pipeline is usually to import data. To include data in a
<a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> pipeline, use <code><a href="../reference/rxp_r_file.html">rxp_r_file()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rxp_r_file.html">rxp_r_file</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>  path <span class="op">=</span> <span class="st">'data/mtcars.csv'</span>,</span>
<span>  read_function <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">x</span>, sep <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/rxp_r_file.html">rxp_r_file()</a></code> requires an R function with a single
argument: the path to the file to be read. In this example, we assume
the columns in the <code>mtcars.csv</code> file are separated by the
<code>|</code> symbol. We use an anonymous function to set the correct
separator and create a temporary function with a single argument to read
the file at <code>'data/mtcars.csv'</code>.</p>
<p>Important: This approach means that the <code>mtcars.csv</code> file
<strong>will be copied</strong> to the Nix store. This is essential to
how Nix works and cannot be avoided.</p>
<p>Note that <code><a href="../reference/rxp_r_file.html">rxp_r_file()</a></code> is quite flexible: it works with
any function that reads a file, regardless of the file type. The path to
the file can also be a URL.</p>
</div>
<div class="section level2">
<h2 id="declaring-build-steps">Declaring build steps<a class="anchor" aria-label="anchor" href="#declaring-build-steps"></a>
</h2>
<p>Once the data is imported, we can start manipulating it. To generate
a derivation similar to the one described in
<code><a href="../articles/a-intro-concepts.html">vignette("a-intro-concepts")</a></code>, but using R and
<a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> instead of <code>awk</code>, we would write:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="va">filtered_mtcars</span>,</span>
<span>  expr <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">am</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This syntax should be familiar to users of the <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a>
package: similar to the <code>tar_target()</code> function, you simply
provide a name for the derivation and the expression to generate it.
That’s all you need to write for <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> to generate all
the required Nix code automatically.</p>
<p>To continue transforming the data, you only need to define a new
derivation:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="va">mtcars_mpg</span>,</span>
<span>  expr <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">filtered_mtcars</span>, <span class="va">mpg</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Notice how the name of <code>d1</code> (<code>filtered_mtcars</code>)
is used in <code>d2</code>: this is how dependencies between derivations
are defined.</p>
</div>
<div class="section level2">
<h2 id="generating-the-pipeline">Generating the pipeline<a class="anchor" aria-label="anchor" href="#generating-the-pipeline"></a>
</h2>
<p>Let’s stop here and build our pipeline. First, we need to define a
list of derivations:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">derivs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">d0</span>, <span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span></span></code></pre></div>
<p>and pass it to the <code><a href="../reference/rixpress.html">rixpress()</a></code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rixpress.html">rixpress</a></span><span class="op">(</span><span class="va">derivs</span><span class="op">)</span></span></code></pre></div>
<p>To make the code more concise, you can directly define the list and
pass it to <code><a href="../reference/rixpress.html">rixpress()</a></code> using the pipe operator
<code>|&gt;</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/rxp_r_file.html">rxp_r_file</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>    path <span class="op">=</span> <span class="st">'data/mtcars.csv'</span>,</span>
<span>    read_function <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">x</span>, sep <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="../reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="va">filtered_mtcars</span>,</span>
<span>    expr <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">am</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="../reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="va">mtcars_mpg</span>,</span>
<span>    expr <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">filtered_mtcars</span>, <span class="va">mpg</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/rixpress.html">rixpress</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Running <code><a href="../reference/rixpress.html">rixpress()</a></code> performs several actions:</p>
<ul>
<li>creates a folder called <code>_rixpress</code> in the project’s root
directory. This folder contains automatically generated files needed for
the pipeline to build successfully.</li>
<li>generates a file called <code>pipeline.nix</code>, which defines the
entire pipeline in the Nix language.</li>
<li>calls the function <code><a href="../reference/rxp_make.html">rxp_make()</a></code> to build the
pipeline.</li>
</ul>
<p>However, if you try to run the code above, it will likely fail. This
is because a crucial piece is missing: the environment in which the
pipeline must run!</p>
</div>
<div class="section level2">
<h2 id="defining-a-reproducible-shell-for-execution">Defining a Reproducible Shell for Execution<a class="anchor" aria-label="anchor" href="#defining-a-reproducible-shell-for-execution"></a>
</h2>
<p>Remember that the core purpose of using Nix is to ensure
reproducibility by forcing you to explicitly declare all dependencies.
For our pipeline above, we need to specify: Which version of R should be
used? Which R packages? The pipeline uses <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code> and
<code>select()</code> from the <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> package, so we must
declare these dependencies.</p>
<p>This is where the <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a> package comes in.
<a href="https://docs.ropensci.org/rix/" class="external-link">rix</a> allows you to define reproducible development
environments using simple R code. For example, we can define an
environment with R and <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> like this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rix/" class="external-link">rix</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/rix/reference/rix.html" class="external-link">rix</a></span><span class="op">(</span></span>
<span>  date <span class="op">=</span> <span class="st">"2025-04-11"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="st">"dplyr"</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"rstudio"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Running this code generates a <code>default.nix</code> file that can
be built using Nix by calling <code>nix-build</code>. This creates a
development environment containing RStudio, R, and <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>
as they existed on April 11, 2025. You can use this environment for
interactive data analysis just as you would with a standard installation
of RStudio, R, and <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>. To learn more about
<a href="https://docs.ropensci.org/rix/" class="external-link">rix</a>, visit <a href="https://docs.ropensci.org/rix/" class="external-link">https://docs.ropensci.org/rix/</a>.</p>
<p>The reproducible development environments generated by
<a href="https://docs.ropensci.org/rix/" class="external-link">rix</a> define all the dependencies needed for your pipeline.
To use this environment to build a <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> pipeline, you
must also add <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> to the list of packages in the
environment. Since <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> is still under development,
it must be installed from GitHub. Here’s how the complete environment
setup script looks:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rix/" class="external-link">rix</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define execution environment</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/rix/reference/rix.html" class="external-link">rix</a></span><span class="op">(</span></span>
<span>  date <span class="op">=</span> <span class="st">"2025-04-11"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="st">"dplyr"</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    package_name <span class="op">=</span> <span class="st">"rixpress"</span>,</span>
<span>    repo_url <span class="op">=</span> <span class="st">"https://github.com/b-rodrigues/rixpress"</span>,</span>
<span>    commit <span class="op">=</span> <span class="st">"HEAD"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"rstudio"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>In the next vignette, we’ll learn how to use <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a>
effectively to provide a reproducible execution environment for our
pipelines. For now, let’s assume that we’ve used the code above to
generate our environment, which we can also use for interactive data
analysis.</p>
<p>We can go back to our pipeline to finalize it:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a></span><span class="op">)</span></span>
<span><span class="co"># Define pipeline</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/rxp_r_file.html">rxp_r_file</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>    path <span class="op">=</span> <span class="st">'data/mtcars.csv'</span>,</span>
<span>    read_function <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">x</span>, sep <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="../reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="va">filtered_mtcars</span>,</span>
<span>    expr <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">am</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="../reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="va">mtcars_mpg</span>,</span>
<span>    expr <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">filtered_mtcars</span>, <span class="va">mpg</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/rixpress.html">rixpress</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span></code></pre></div>
<p>I recommend always using two separate scripts:</p>
<ul>
<li>
<code>gen-env.R</code>: Uses <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a> to define the
execution environment</li>
<li>
<code>gen-pipeline.R</code>: Uses <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> to define
the reproducible analytical pipeline</li>
</ul>
<p>You can quickly create these scripts using the
<code><a href="../reference/rxp_init.html">rxp_init()</a></code> function, which generates both files with
starter code to help you get started quickly.</p>
</div>
<div class="section level2">
<h2 id="building-and-inspecting-outputs">Building and inspecting outputs<a class="anchor" aria-label="anchor" href="#building-and-inspecting-outputs"></a>
</h2>
<p>When you run <code>gen-pipeline.R</code> (or execute its contents
line-by-line), the environment defined in <code>default.nix</code> is
used. (It’s also possible to define separate environments for different
derivations, which we’ll cover in a later vignette.) Upon successful
execution, you should see:</p>
<pre><code>Build process started...


Build successful! Run `rxp_inspect()` for a summary.
Read individual derivations using `rxp_read()` or
load them into the global environment using `rxp_load()`.</code></pre>
<p>Now you can follow these instructions:</p>
<ol style="list-style-type: decimal">
<li>Use <code><a href="../reference/rxp_inspect.html">rxp_inspect()</a></code> to see where the outputs are located.
This function is particularly useful if the pipeline fails, as it shows
which derivations succeeded and which failed.</li>
<li>Use <code>rxp_read("mtcars_mpg")</code> to read the object into your
current R session, or <code>rxp_load("mtcars_mpg")</code> to load it
directly into your global environment.</li>
<li>Alternatively, use <code>rxp_copy("mtcars_mpg")</code> to create a
folder called <code>pipeline-outputs</code> containing
<code>mtcars_mpg</code> as an <code>.rds</code> file. If you call
<code><a href="../reference/rxp_copy.html">rxp_copy()</a></code> without arguments, all pipeline outputs will be
copied to this folder.</li>
</ol>
</div>
<div class="section level2">
<h2 id="dag-representation-of-the-pipeline">DAG Representation of the Pipeline<a class="anchor" aria-label="anchor" href="#dag-representation-of-the-pipeline"></a>
</h2>
<p>It’s often helpful to visualize your pipeline as a DAG (directed
acyclic graph). You can generate and inspect this visualization before
building the pipeline by adding the <code>build = FALSE</code> argument
to <code><a href="../reference/rixpress.html">rixpress()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rixpress.html">rixpress</a></span><span class="op">(</span><span class="va">derivs</span>, build <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>This won’t build the pipeline but will generate useful files,
including a JSON representation of the pipeline at
<code>_rixpress/dag.json</code>. This process is quick and allows you to
visualize the graph using <code><a href="../reference/rxp_visnetwork.html">rxp_visnetwork()</a></code>, which opens a
new tab in your web browser with the DAG of the pipeline made using the
<a href="https://datastorm-open.github.io/visNetwork/" class="external-link">visNetwork</a> package:</p>
<video id="rixpress-video" controls autoplay loop muted style="max-width: 100%; height: auto; display: block;"><source src="https://github.com/b-rodrigues/rixpress/raw/refs/heads/main/rxp_visnetwork.mp4" type="video/mp4" srcset="NA"></source><!-- Fallback message -->
Your browser does not support the MP4 video format.
</video><p>(This image shows the DAG of a more complex example pipeline.)</p>
<p>For static documents, you can use <code><a href="../reference/rxp_ggdag.html">rxp_ggdag()</a></code> which uses
<a href="https://github.com/r-causal/ggdag" class="external-link">ggdag</a> under the hood:</p>
<figure><img src="https://raw.githubusercontent.com/b-rodrigues/rixpress/refs/heads/main/dag.png" alt="DAG"><figcaption aria-hidden="true">
DAG
</figcaption></figure><p>You can also return the underlying <code>igraph</code> object to plot
the DAG using other tools:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dag_for_ci.html">dag_for_ci</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>which saves the <code>dag.dot</code> object in the project’s
<code>_rixpress/</code> folder.</p>
<p>After reviewing the DAG, you can build the pipeline by running
<code><a href="../reference/rxp_make.html">rxp_make()</a></code> instead of modifying your original
<code><a href="../reference/rixpress.html">rixpress()</a></code> call.</p>
</div>
<div class="section level2">
<h2 id="caveats">Caveats<a class="anchor" aria-label="anchor" href="#caveats"></a>
</h2>
<p>There are some caveats that you need to be aware of when using
<a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a>. Due to how Nix works, certain things are simply
not possible:</p>
<ul>
<li>as mentioned in the <code><a href="../articles/a-intro-concepts.html">vignette("a-intro-concepts")</a></code>,
functions are executed in a hermetic sandbox: if they need access to
some external resource, the build is going to fail. For example, if you
use some function to get data from an API, you need to get the data in a
classic interactive R session, save this data on disk, and then you can
include it in the pipeline. The only exception to this is
<code><a href="../reference/rxp_r_file.html">rxp_r_file()</a></code> which can download a file from a URL.</li>
<li>all build artifacts will be saved in the Nix store,
<code>/nix/store/</code>. If you are working with confidential data,
make sure no one else can access the <code>/nix/store</code>.</li>
<li>if you have proprietary R packages, you will need to include them in
the Nix shell. This is more a discussion for <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a>, since
it is <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a> that generates the execution environment, so if
you require some help to package your packages, open an issue <a href="https://github.com/ropensci/rix/issues" class="external-link">on the rix GitHub
repository</a>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>Now that you understand the basic, high-level concepts, let’s move on
to the next vignette, <code><a href="../articles/c-tutorial.html">vignette("c-tutorial")</a></code>, where we’ll
learn how to set up a pipeline from start to finish.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bruno Rodrigues.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
