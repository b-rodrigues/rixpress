% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rixpress.R
\name{rixpress}
\alias{rixpress}
\title{Generate Nix Pipeline Code with a Generic Default Target}
\usage{
rixpress(derivs)
}
\arguments{
\item{derivs}{A list of derivation objects, where each object must have two
elements: \verb{$name} (a character string naming the derivation) and \verb{$snippet}
(a character string containing the Nix code defining the derivation).
Typically, these objects are created by a function like \code{derive_r}.}
}
\value{
A character string containing the complete Nix code for a
\code{pipeline.nix} file. This string can be written to a file or passed to
another function for further processing.
}
\description{
This function generates a string containing Nix code for a \code{pipeline.nix} file
based on a list of derivation objects. Each derivation is defined by a snippet
of Nix code and a name, typically created using a function like \code{derive_r}. The
resulting Nix code defines all derivations and sets a generic default target
that builds all of them using \code{pkgs.symlinkJoin}. This is designed for
building reproducible analytical pipelines with Nix, inspired by the
\code{targets} R package.
}
\details{
The generated Nix code includes:
\itemize{
\item A \code{default.nix} import for environment setup via the \code{rix} package.
\item A \code{makeRDerivation} function to standardize derivation creation.
\item All derivations from the \code{derivs} list.
\item A default target (\code{allDerivations}) that builds all derivations when
\verb{nix-build pipeline.nix} is run without specifying an attribute.
}

The function assumes the existence of a \code{libraries.R} file in the working
directory, which is copied into the build environment by the Nix code.
}
\examples{
\dontrun{
# Create derivation objects
d1 <- derive_r(mtcars_am, filter(mtcars, am == 1))
d2 <- derive_r(mtcars_head, head(mtcars_am))
derivs <- list(d1, d2)

# Generate the pipeline code
rixpress(derivs)

}
}
