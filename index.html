<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Build Reproducible Analytical Pipelines with Nix • rixpress</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Build Reproducible Analytical Pipelines with Nix">
<meta name="description" content="Streamlines the creation of reproducible analytical pipelines using `default.nix` expressions generated via `{rix}` for reproducibility. Define derivations in R, Python or Julia, chain them into a composition of pure functions and build the resulting pipeline using `Nix` as the underlying end-to-end build tool. Functions to plot a DAG representation of the pipeline are included, as well as functions to load and inspect intermediary results for interactive analysis. User experience heavily inspired by the `{targets}` package.">
<meta property="og:description" content="Streamlines the creation of reproducible analytical pipelines using `default.nix` expressions generated via `{rix}` for reproducibility. Define derivations in R, Python or Julia, chain them into a composition of pure functions and build the resulting pipeline using `Nix` as the underlying end-to-end build tool. Functions to plot a DAG representation of the pipeline are included, as well as functions to load and inspect intermediary results for interactive analysis. User experience heavily inspired by the `{targets}` package.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">rixpress</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="articles/intro-concepts.html">Introductory concepts</a></li>
    <li><a class="dropdown-item" href="articles/scope.html">Scope and Roadmap</a></li>
    <li><a class="dropdown-item" href="articles/core-functions.html">Core rixpress Functions and Usage</a></li>
    <li><a class="dropdown-item" href="articles/tutorial.html">Setting up a pipeline from scratch: a tutorial</a></li>
    <li><a class="dropdown-item" href="articles/importing-data.html">Importing Data Files</a></li>
    <li><a class="dropdown-item" href="articles/debugging.html">Effective debugging</a></li>
    <li><a class="dropdown-item" href="articles/gc.html">Managing Cached Build Artifacts</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Polyglot pipelines</h6></li>
    <li><a class="dropdown-item" href="articles/polyglot.html">Polyglot pipelines and literate programming with Quarto or R Markdown</a></li>
    <li><a class="dropdown-item" href="articles/polyglot-julia.html">Polyglot pipelines with Julia and R</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="articles/ci.html">Running pipelines in CI</a></li>
    <li><a class="dropdown-item" href="articles/cmdstanr.html">Using {cmdstanr} with {rixpress}</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/b-rodrigues/rixpress/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rixpress-reproducible-analytical-pipelines-with-nix">rixpress: Reproducible Analytical Pipelines with <code>Nix</code>
<a class="anchor" aria-label="anchor" href="#rixpress-reproducible-analytical-pipelines-with-nix"></a>
</h1></div>
<p><a href="https://github.com/b-rodrigues/rixpress/actions/workflows/rhub.yaml/" class="external-link"><img src="https://github.com/b-rodrigues/rixpress/actions/workflows/rhub.yaml/badge.svg" alt="R-hub v2"></a> <a href="https://github.com/ropensci/software-review/issues/706" class="external-link"><img src="https://badges.ropensci.org/706_status.svg" alt="Status at rOpenSci Software Peer Review"></a></p>
<p>If you want to watch a 2-Minute video introduction, click the image below:</p>
<p><a href="https://www.youtube.com/watch?v=a1eNG9TFZ_o" target="_blank" rel="noopener noreferrer" class="external-link"> <img src="https://raw.githubusercontent.com/b-rodrigues/rixpress/refs/heads/main/video_thumbnail.png" alt="Video Thumbnail" style="width:100%; max-width:560px; height:auto; display:block; margin:0 auto;"></a></p>
<p><a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> provides a framework for building multilanguage reproducible analytical pipelines by leveraging Nix’s build automation capabilities. One of the design goals of <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> is to mimic the user experience of the <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a> package, and it is heavily inspired by that workflow. It builds on the <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a> package, which provides helper functions to define reproducible development environments as code using Nix, ensuring the pipeline runs in a fully reproducible Nix-managed environment. <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> only requires users to write the pipeline using familiar R code.</p>
<p><code>rixpress</code> focuses on “micropipelines”: pipelines executed on a single machine for small-to-medium sized projects.</p>
<p>For example, this R script defines a list of <em>derivations</em> defined by functions prefixed with <code>rxp_*()</code>, which is then passed to <code><a href="reference/rxp_populate.html">rxp_populate()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/rxp_r_file.html">rxp_r_file</a></span><span class="op">(</span></span>
<span>    <span class="va">mtcars</span>,</span>
<span>    <span class="st">'mtcars.csv'</span>,</span>
<span>    \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">x</span>, sep <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>    <span class="va">mtcars_am</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">am</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>    <span class="va">mtcars_head</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mtcars_am</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>    <span class="va">mtcars_tail</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">mtcars_head</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="reference/rxp_r.html">rxp_r</a></span><span class="op">(</span></span>
<span>    <span class="va">mtcars_mpg</span>,</span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">mtcars_tail</span>, <span class="va">mpg</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="reference/rxp_qmd.html">rxp_qmd</a></span><span class="op">(</span></span>
<span>    <span class="va">page</span>,</span>
<span>    <span class="st">"page.qmd"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/rxp_populate.html">rxp_populate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Running <code><a href="reference/rxp_populate.html">rxp_populate()</a></code> generates a <code>pipeline.nix</code> file, which contains the build instructions for all derivations and final outputs expressed as Nix code. You can define derivations that run Python or Julia code, and objects can be exchanged between R and Python by using <code><a href="reference/rxp_py2r.html">rxp_py2r()</a></code> and <code><a href="reference/rxp_r2py.html">rxp_r2py()</a></code>, or by serializing to a common format such as JSON. By default, calling <code><a href="reference/rxp_populate.html">rxp_populate()</a></code> also builds the pipeline, but it’s possible to only generate the <code>pipeline.nix</code> file and build the pipeline later using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rxp_make.html">rxp_make</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The build process assumes the presence of a <code>default.nix</code> file that defines the computational environment the pipeline runs in; this file can be generated with the {rix} package. The <code>default.nix</code> typically defines an environment with R and required R packages (and optionally Python/Julia and their packages), Quarto, and any necessary system-level dependencies pinned to a specific date to ensure reproducibility.</p>
<p>In the example above, the first derivation reads <code>mtcars.csv</code> (in the example it’s pipe-separated, i.e. a <code>.psv</code> file). Each output (for example, <code>mtcars</code>, <code>mtcars_am</code>, <code>mtcars_head</code>, <code>mtcars_tail</code>, <code>mtcars_mpg</code>, <code>page</code>) is built by Nix within the environment defined by <code>default.nix</code>. Concretely, {rix} makes using Nix as a package manager easier for R users, and {rixpress} makes it easy to use Nix as a build automation tool.</p>
<p>When you run <code><a href="reference/rxp_populate.html">rxp_populate()</a></code>, a folder called <code>_rixpress/</code> is created which contains a JSON representation of the pipeline’s DAG (Directed Acyclic Graph). You can visualize the pipeline using <code><a href="reference/rxp_ggdag.html">rxp_ggdag()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rxp_ggdag.html">rxp_ggdag</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<figure><img src="https://raw.githubusercontent.com/b-rodrigues/rixpress/refs/heads/main/dag.png" alt="DAG"><figcaption aria-hidden="true">
DAG
</figcaption></figure><p>Because the pipeline is built using Nix, outputs are stored in the Nix store under <code>/nix/store/</code>. To make working with these outputs easier, <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> provides several helper functions:</p>
<ul>
<li>
<code>rxp_read("mtcars_mpg")</code> — read the content of <code>mtcars_mpg</code> into R (the return value depends on the derivation type: an R object, a file path, etc.);</li>
<li>
<code>rxp_load("mtcars_mpg")</code> — load objects from the result into the global environment;</li>
<li>
<code>rxp_copy("page")</code> — copy outputs (e.g. a generated document) from the Nix store into the current working directory so you can open or inspect them there.</li>
</ul>
<p>For complex outputs such as documents (for example the Quarto document <code>page</code> above), <code>rxp_read("page")</code> returns the output file path; you can then open it with <code><a href="https://rdrr.io/r/utils/browseURL.html" class="external-link">browseURL()</a></code> or copy it into your working directory with <code><a href="reference/rxp_copy.html">rxp_copy()</a></code>.</p>
<p>You can export the cache into a file and import it on another machine (or in CI) to avoid rebuilding everything from scratch using <code><a href="reference/rxp_export_artifacts.html">rxp_export_artifacts()</a></code> and <code><a href="reference/rxp_import_artifacts.html">rxp_import_artifacts()</a></code> respectively.</p>
<p><a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> is flexible; please consult the examples repository for many different patterns and complete demos:</p>
<p><a href="https://github.com/b-rodrigues/rixpress_demos/tree/master" class="external-link uri">https://github.com/b-rodrigues/rixpress_demos/tree/master</a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="rix">rix<a class="anchor" aria-label="anchor" href="#rix"></a>
</h3>
<p><a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> builds on <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a>, so we highly recommend you start by learning and using <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a> before trying your hand at <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a>. By learning how to use <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a>, you’ll learn more about <code>Nix</code>, how to install and use it, and will then be ready to use <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a>!</p>
<p>To install Nix, we recommend using the installer from <a href="https://docs.determinate.systems/" class="external-link">Determinate Systems</a>.</p>
</div>
<div class="section level3">
<h3 id="installing-rixpress">Installing rixpress<a class="anchor" aria-label="anchor" href="#installing-rixpress"></a>
</h3>
<p>Since there’s little point in installing <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> if you don’t use <code>Nix</code>, the ideal way to install <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> is instead to use <a href="https://docs.ropensci.org/rix/" class="external-link">rix</a> to set up a reproducible environment that includes <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> and the other required dependencies for your project. Take a look at the <code><a href="articles/intro-concepts.html">vignette("intro-concepts")</a></code> and <code><a href="articles/core-functions.html">vignette("core-functions")</a></code> to get started!</p>
<p>That being said, <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> is a regular R package, so you can install it from GitHub directly (while it’s not on CRAN):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install remotes if you don’t have it</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install the package from GitHub</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"b-rodrigues/rixpress"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Pull requests are welcome. If you’re unsure whether to open one, feel free to open an issue first to discuss your idea. For contributor guidelines, see CONTRIBUTING.md.</p>
<p>If you plan to contribute documentation or vignettes, please:</p>
<ul>
<li>Add runnable, minimal examples.</li>
<li>Prefer small datasets and short-running examples.</li>
<li>Document required system dependencies for the example (through a <code>default.nix</code>).</li>
</ul>
</div>
<div class="section level2">
<h2 id="scope">Scope<a class="anchor" aria-label="anchor" href="#scope"></a>
</h2>
<p>Please refer to the <code><a href="articles/scope.html">vignette("scope")</a></code> to learn more about what <a href="https://github.com/b-rodrigues/rixpress/" class="external-link">rixpress</a> will and will not support.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/b-rodrigues/rixpress/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/b-rodrigues/rixpress/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rixpress</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Bruno Rodrigues <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3211-3689" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bruno Rodrigues.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
